{"remainingRequest":"D:\\fibicomp-frontend\\fibicomp_front\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js??ref--3-1!D:\\fibicomp-frontend\\fibicomp_front\\node_modules\\elasticsearch\\src\\lib\\logger.js","dependencies":[{"path":"D:\\fibicomp-frontend\\fibicomp_front\\node_modules\\elasticsearch\\src\\lib\\logger.js","mtime":1518154263681},{"path":"D:\\fibicomp-frontend\\fibicomp_front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1510929699000},{"path":"D:\\fibicomp-frontend\\fibicomp_front\\node_modules\\@angular-devkit\\build-optimizer\\src\\build-optimizer\\webpack-loader.js","mtime":1518048966000}],"contextDependencies":[],"result":["var _ = require('./utils');\n\n/**\n * Abstract class providing common functionality to loggers\n * @param {[type]} log [description]\n * @param {[type]} config [description]\n */\nfunction LoggerAbstract(log, config) {\n  this.log = log;\n  this.listeningLevels = [];\n\n  _.makeBoundMethods(this);\n\n  // when the log closes, remove our event listeners\n  this.log.once('closing', this.bound.cleanUpListeners);\n\n  this.setupListeners(config.levels);\n}\n\nfunction padNumToTen(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n/**\n * Create a timestamp string used in the format function. Defers to Log.timestamp if it is defined,\n * Also, feel free to override this at the logger level.\n * @return {String} - Timestamp in ISO 8601 UTC\n */\nLoggerAbstract.prototype.timestamp = function () {\n  var d = new Date();\n  return d.getUTCFullYear() + '-' +\n    padNumToTen(d.getUTCMonth() + 1) + '-' +\n    padNumToTen(d.getUTCDate()) + 'T' +\n    padNumToTen(d.getUTCHours()) + ':' +\n    padNumToTen(d.getUTCMinutes()) + ':' +\n    padNumToTen(d.getUTCSeconds()) + 'Z';\n};\n\nfunction indent(text, spaces) {\n  var space = _.repeat(' ', spaces || 2);\n  return (text || '').split(/\\r?\\n/).map(function (line) {\n    return space + line;\n  }).join('\\n');\n}\n\nLoggerAbstract.prototype.format = function (label, message) {\n  return label + ': ' + this.timestamp() + '\\n' + indent(message) + '\\n\\n';\n};\n\nLoggerAbstract.prototype.write = function () {\n  throw new Error('This should be overwritten by the logger');\n};\n\n/**\n * Clear the current event listeners and then re-listen for events based on the level specified\n *\n * @method setupListeners\n * @private\n * @param  {Integer} level - The max log level that this logger should listen to\n * @return {undefined}\n */\nLoggerAbstract.prototype.setupListeners = function (levels) {\n  this.cleanUpListeners();\n\n  this.listeningLevels = [];\n\n  _.each(levels, _.bind(function (level) {\n    var fnName = 'on' + _.ucfirst(level);\n    if (this.bound[fnName]) {\n      this.listeningLevels.push(level);\n      this.log.on(level, this.bound[fnName]);\n    } else {\n      throw new Error('Unable to listen for level \"' + level + '\"');\n    }\n  }, this));\n};\n\n/**\n * Clear the current event listeners\n *\n * @method cleanUpListeners\n * @private\n * @return {undefined}\n */\nLoggerAbstract.prototype.cleanUpListeners = _.handler(function () {\n  _.each(this.listeningLevels, _.bind(function (level) {\n    this.log.removeListener(level, this.bound['on' + _.ucfirst(level)]);\n  }, this));\n});\n\n/**\n * Handler for the logs \"error\" event\n *\n * @method onError\n * @private\n * @param  {Error} e - The Error object to log\n * @return {undefined}\n */\nLoggerAbstract.prototype.onError = _.handler(function (e) {\n  this.write((e.name === 'Error' ? 'ERROR' : e.name), e.stack);\n});\n\n/**\n * Handler for the logs \"warning\" event\n *\n * @method onWarning\n * @private\n * @param  {String} msg - The message to be logged\n * @return {undefined}\n */\nLoggerAbstract.prototype.onWarning = _.handler(function (msg) {\n  this.write('WARNING', msg);\n});\n\n/**\n * Handler for the logs \"info\" event\n *\n * @method onInfo\n * @private\n * @param  {String} msg - The message to be logged\n * @return {undefined}\n */\nLoggerAbstract.prototype.onInfo = _.handler(function (msg) {\n  this.write('INFO', msg);\n});\n\n/**\n * Handler for the logs \"debug\" event\n *\n * @method onDebug\n * @private\n * @param  {String} msg - The message to be logged\n * @return {undefined}\n */\nLoggerAbstract.prototype.onDebug = _.handler(function (msg) {\n  this.write('DEBUG', msg);\n});\n\n/**\n * Handler for the logs \"trace\" event\n *\n * @method onTrace\n * @private\n * @param  {String} msg - The message to be logged\n * @return {undefined}\n */\nLoggerAbstract.prototype.onTrace = _.handler(function (requestDetails) {\n  this.write('TRACE', this._formatTraceMessage(requestDetails));\n});\n\nLoggerAbstract.prototype._formatTraceMessage = function (req) {\n  return '-> ' + req.method + ' ' + req.url + '\\n' +\n    this._prettyJson(req.body) + '\\n' +\n    '<- ' + req.status + '\\n' +\n    this._prettyJson(req.response);\n/*\n-> GET https://sldfkjsdlfksjdf:9200/slsdkfjlxckvxhclks?sdlkj=sdlfkje\n{\n  asdflksjdf\n}\n\n<- 502\n{\n  sldfksjdlf\n}\n*/\n};\n\nLoggerAbstract.prototype._prettyJson = function (body) {\n  try {\n    if (typeof body === 'string') {\n      body = JSON.parse(body);\n    }\n    return JSON.stringify(body, null, '  ').replace(/'/g, '\\\\u0027');\n  } catch (e) {\n    return typeof body === 'string' ? body : '';\n  }\n};\n\nmodule.exports = LoggerAbstract;\n",null]}